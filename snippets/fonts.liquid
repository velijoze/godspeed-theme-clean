<!-- /snippets/fonts.liquid -->
{% if settings.font_body contains 'google:' or settings.font_accent contains 'google:' or settings.font_title contains 'google:' %}
{{ 'webfont.js' | asset_url | script_tag }}
<script type="text/javascript">
  WebFont.load({
    google: {
      families:
        {% capture requestString %}
          {% if settings.font_body contains 'google:' %}
            {{ settings.font_body | remove: 'google:' | remove: 'sansStack:' | remove: 'serifStack:' }},400italic,700,700italic:latin&
          {% endif %}
          {% if settings.font_accent contains 'google:' %}
            {{ settings.font_accent | remove: 'google:' | remove: 'sansStack:' | remove: 'serifStack:' }}:latin&
          {% endif %}
          {% if settings.font_title contains 'google:' %}
            {{ settings.font_title | remove: 'google:' | remove: 'sansStack:' | remove: 'serifStack:' }}:latin&
          {% endif %}
        {% endcapture %}
        {% assign requestString = requestString | remove: ' ' | strip_newlines %}
        {% assign requestArray = requestString | split: "&" %}
        {% assign requestArray = requestArray | where_exp: "item", "item != ''" %}
        {{requestArray | json}}
    },
    timeout: 5000
  });
</script>
{% endif %}
