{% comment %}
  Section: Customer Testimonials
  Display customer reviews and testimonials
{% endcomment %}

<div class="page-width">
  {% if section.settings.title != blank %}
    <div class="section-header text-center">
      <h2>{{ section.settings.title }}</h2>
      {% if section.settings.description != blank %}
        <p class="rte">{{ section.settings.description }}</p>
      {% endif %}
    </div>
  {% endif %}

  <div class="grid">
    {% for block in section.blocks %}
      <div class="grid__item large--one-third medium--one-half text-center" {{ block.shopify_attributes }}>
        {% if block.settings.stars != blank %}
          <div style="margin-bottom: 1rem;">
            {% assign star_count = block.settings.stars | plus: 0 %}
            {% for i in (1..5) %}
              {% if i <= star_count %}
                <span style="color: #FFD700; font-size: 1.2rem;">⭐</span>
              {% else %}
                <span style="color: #ddd; font-size: 1.2rem;">☆</span>
              {% endif %}
            {% endfor %}
          </div>
        {% endif %}
        
        {% if block.settings.quote != blank %}
          <blockquote style="font-style: italic; margin-bottom: 1rem;">
            "{{ block.settings.quote }}"
          </blockquote>
        {% endif %}
        
        {% if block.settings.photo != blank %}
          <img src="{{ block.settings.photo | img_url: '100x100' }}" alt="{{ block.settings.name }}" loading="lazy" style="width: 50px; height: 50px; border-radius: 50%; margin-bottom: 0.5rem;">
        {% endif %}
        
        {% if block.settings.name != blank %}
          <div class="h5">{{ block.settings.name }}</div>
        {% endif %}
        
        {% if block.settings.location != blank %}
          <div style="color: #666; font-size: 0.9rem;">{{ block.settings.location }}</div>
        {% endif %}
        
        {% if block.settings.bike_model != blank %}
          <div class="label" style="font-size: 0.85rem;">{{ block.settings.bike_model }}</div>
        {% endif %}
      </div>
    {% endfor %}
  </div>

  {% if section.settings.cta_text != blank and section.settings.cta_link != blank %}
    <div class="text-center" style="margin-top: 3rem;">
      <a href="{{ section.settings.cta_link }}" class="btn btn--primary">
        {{ section.settings.cta_text }}
      </a>
    </div>
  {% endif %}
</div>


{% schema %}
{
  "name": "Customer Testimonials",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "What Our Customers Say"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Real experiences from real e-bike riders"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "Call to Action Text",
      "default": "Share Your Experience"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "Call to Action Link"
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        {
          "type": "range",
          "id": "stars",
          "label": "Star Rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 5
        },
        {
          "type": "textarea",
          "id": "quote",
          "label": "Testimonial Quote",
          "default": "Absolutely love my new e-bike! The team at Godspeed made the whole process so easy."
        },
        {
          "type": "image_picker",
          "id": "photo",
          "label": "Customer Photo"
        },
        {
          "type": "text",
          "id": "name",
          "label": "Customer Name",
          "default": "Sarah M."
        },
        {
          "type": "text",
          "id": "location",
          "label": "Location",
          "default": "Zurich"
        },
        {
          "type": "text",
          "id": "bike_model",
          "label": "E-Bike Model",
          "default": "Cube Touring Hybrid"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Customer Testimonials",
      "category": "Testimonials",
      "blocks": [
        {
          "type": "testimonial",
          "settings": {
            "stars": 5,
            "quote": "The team at Godspeed helped me find the perfect e-bike for my daily commute. Outstanding service and quality!",
            "name": "Sarah M.",
            "location": "Zurich",
            "bike_model": "Cube Touring Hybrid"
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "stars": 5,
            "quote": "I was hesitant about e-bikes, but after a test ride at Godspeed, I was convinced. Best purchase I've made!",
            "name": "Thomas K.",
            "location": "Basel",
            "bike_model": "Trek Verve+ 2"
          }
        }
      ]
    }
  ]
}
{% endschema %}