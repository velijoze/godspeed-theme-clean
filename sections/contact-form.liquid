{% comment %}
  Section: Contact Form
  Contact form with multiple form types
{% endcomment %}

<div class="contact-form-section">
  <div class="page-width">
    {% if section.settings.title != blank %}
      <div class="section-header text-center">
        <h2>{{ section.settings.title }}</h2>
        {% if section.settings.description != blank %}
          <p>{{ section.settings.description }}</p>
        {% endif %}
      </div>
    {% endif %}

    <div class="contact-form-container">
      {% if section.settings.show_form_selector %}
        <div class="form-type-selector">
          <button class="form-type-btn active" data-form="general">{{ section.settings.general_form_label | default: "General Inquiry" }}</button>
          <button class="form-type-btn" data-form="support">{{ section.settings.support_form_label | default: "Support" }}</button>
          <button class="form-type-btn" data-form="sales">{{ section.settings.sales_form_label | default: "Sales" }}</button>
        </div>
      {% endif %}

      <!-- General Contact Form -->
      <div class="contact-form active" id="general-form">
        {% form 'contact' %}
          {% if form.posted_successfully? %}
            <div class="form-success">
              <h3>{{ section.settings.success_title | default: "Thank you!" }}</h3>
              <p>{{ section.settings.success_message | default: "Your message has been sent successfully. We'll get back to you soon." }}</p>
            </div>
          {% endif %}

          {% if form.errors %}
            <div class="form-errors">
              <h4>{{ 'contact.form.error_heading' | t }}</h4>
              <ul>
                {% for field in form.errors %}
                  <li>{{ field }} {{ form.errors[field] }}</li>
                {% endfor %}
              </ul>
            </div>
          {% endif %}

          <div class="form-row">
            <div class="form-group">
              <label for="contact-name">{{ section.settings.name_label | default: "Name" }} *</label>
              <input type="text" id="contact-name" name="contact[name]" required>
            </div>
            <div class="form-group">
              <label for="contact-email">{{ section.settings.email_label | default: "Email" }} *</label>
              <input type="email" id="contact-email" name="contact[email]" required>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="contact-phone">{{ section.settings.phone_label | default: "Phone" }}</label>
              <input type="tel" id="contact-phone" name="contact[phone]">
            </div>
            <div class="form-group">
              <label for="contact-subject">{{ section.settings.subject_label | default: "Subject" }}</label>
              <select id="contact-subject" name="contact[subject]">
                <option value="">{{ section.settings.subject_placeholder | default: "Select a subject" }}</option>
                <option value="General Inquiry">General Inquiry</option>
                <option value="Product Question">Product Question</option>
                <option value="Technical Support">Technical Support</option>
                <option value="Warranty">Warranty</option>
                <option value="Other">Other</option>
              </select>
            </div>
          </div>

          <div class="form-group full-width">
            <label for="contact-message">{{ section.settings.message_label | default: "Message" }} *</label>
            <textarea id="contact-message" name="contact[body]" rows="6" required placeholder="{{ section.settings.message_placeholder | default: 'Tell us how we can help you...' }}"></textarea>
          </div>

          {% if section.settings.show_consent_checkbox %}
            <div class="form-group consent-group">
              <label class="consent-label">
                <input type="checkbox" name="contact[consent]" required>
                <span class="checkmark"></span>
                {{ section.settings.consent_text | default: "I agree to receive communications from Godspeed and understand I can unsubscribe at any time." }}
              </label>
            </div>
          {% endif %}

          <div class="form-actions">
            <button type="submit" class="btn btn--primary btn--large">
              {{ section.settings.submit_button_text | default: "Send Message" }}
            </button>
          </div>
        {% endform %}
      </div>

      <!-- Support Form -->
      <div class="contact-form" id="support-form">
        {% form 'contact' %}
          <input type="hidden" name="contact[form_type]" value="support">
          
          <div class="form-row">
            <div class="form-group">
              <label for="support-name">Name *</label>
              <input type="text" id="support-name" name="contact[name]" required>
            </div>
            <div class="form-group">
              <label for="support-email">Email *</label>
              <input type="email" id="support-email" name="contact[email]" required>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="support-order">Order Number</label>
              <input type="text" id="support-order" name="contact[order_number]" placeholder="Optional">
            </div>
            <div class="form-group">
              <label for="support-product">Product Model</label>
              <input type="text" id="support-product" name="contact[product_model]" placeholder="e.g., Cube Town Sport">
            </div>
          </div>

          <div class="form-group full-width">
            <label for="support-issue">Describe Your Issue *</label>
            <textarea id="support-issue" name="contact[body]" rows="6" required placeholder="Please describe the issue you're experiencing in detail..."></textarea>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn--primary btn--large">Submit Support Request</button>
          </div>
        {% endform %}
      </div>

      <!-- Sales Form -->
      <div class="contact-form" id="sales-form">
        {% form 'contact' %}
          <input type="hidden" name="contact[form_type]" value="sales">
          
          <div class="form-row">
            <div class="form-group">
              <label for="sales-name">Name *</label>
              <input type="text" id="sales-name" name="contact[name]" required>
            </div>
            <div class="form-group">
              <label for="sales-email">Email *</label>
              <input type="email" id="sales-email" name="contact[email]" required>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="sales-phone">Phone</label>
              <input type="tel" id="sales-phone" name="contact[phone]">
            </div>
            <div class="form-group">
              <label for="sales-interest">I'm interested in</label>
              <select id="sales-interest" name="contact[interest]">
                <option value="">Select category</option>
                <option value="City E-Bikes">City E-Bikes</option>
                <option value="Mountain E-Bikes">Mountain E-Bikes</option>
                <option value="Cargo E-Bikes">Cargo E-Bikes</option>
                <option value="Accessories">Accessories</option>
                <option value="Test Ride">Test Ride</option>
                <option value="Corporate Sales">Corporate Sales</option>
              </select>
            </div>
          </div>

          <div class="form-group full-width">
            <label for="sales-message">Tell us about your needs *</label>
            <textarea id="sales-message" name="contact[body]" rows="6" required placeholder="What are you looking for? Budget range? Timeline? Let us know how we can help..."></textarea>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn--primary btn--large">Contact Sales Team</button>
          </div>
        {% endform %}
      </div>
    </div>
  </div>
</div>

<style>
  .contact-form-section {
    padding: {{ section.settings.padding_top }}px 0 {{ section.settings.padding_bottom }}px;
    background: {{ section.settings.background_color }};
  }

  .contact-form-container {
    max-width: 800px;
    margin: 2rem auto;
  }

  .form-type-selector {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 2rem;
    flex-wrap: wrap;
  }

  .form-type-btn {
    background: #f8f9fa;
    border: 2px solid #e0e0e0;
    padding: 0.75rem 1.5rem;
    border-radius: 25px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    color: #666;
  }

  .form-type-btn.active,
  .form-type-btn:hover {
    background: #E1306C;
    border-color: #E1306C;
    color: white;
  }

  .contact-form {
    display: none;
    background: white;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
  }

  .contact-form.active {
    display: block;
  }

  .form-row {
    display: flex;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  .form-group {
    flex: 1;
    margin-bottom: 1rem;
  }

  .form-group.full-width {
    width: 100%;
  }

  .form-group label {
    display: block;
    font-weight: 600;
    color: #2c2c2c;
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
  }

  .form-group input,
  .form-group select,
  .form-group textarea {
    width: 100%;
    padding: 0.75rem;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 1rem;
    transition: border-color 0.3s ease;
    font-family: inherit;
  }

  .form-group input:focus,
  .form-group select:focus,
  .form-group textarea:focus {
    outline: none;
    border-color: #E1306C;
    box-shadow: 0 0 0 3px rgba(225,48,108,0.1);
  }

  .consent-group {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
  }

  .consent-label {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    font-size: 0.9rem;
    line-height: 1.4;
    cursor: pointer;
  }

  .consent-label input[type="checkbox"] {
    width: auto;
    margin: 0;
  }

  .form-actions {
    text-align: center;
    margin-top: 2rem;
  }

  .btn--large {
    padding: 1rem 2rem;
    font-size: 1.1rem;
  }

  .form-success {
    background: #d4edda;
    border: 1px solid #c3e6cb;
    color: #155724;
    padding: 1.5rem;
    border-radius: 8px;
    margin-bottom: 2rem;
    text-align: center;
  }

  .form-success h3 {
    margin-bottom: 0.5rem;
    color: #155724;
  }

  .form-errors {
    background: #f8d7da;
    border: 1px solid #f5c6cb;
    color: #721c24;
    padding: 1.5rem;
    border-radius: 8px;
    margin-bottom: 2rem;
  }

  .form-errors h4 {
    margin-bottom: 0.5rem;
    color: #721c24;
  }

  .form-errors ul {
    margin: 0;
    padding-left: 1.5rem;
  }

  @media (max-width: 768px) {
    .contact-form-section {
      padding: {{ section.settings.padding_top | divided_by: 2 }}px 0 {{ section.settings.padding_bottom | divided_by: 2 }}px;
    }
    
    .form-row {
      flex-direction: column;
      gap: 0;
    }
    
    .contact-form {
      padding: 1.5rem;
      margin: 0 1rem;
    }
    
    .form-type-selector {
      margin: 0 1rem 2rem 1rem;
    }
    
    .form-type-btn {
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const formTypeButtons = document.querySelectorAll('.form-type-btn');
    const contactForms = document.querySelectorAll('.contact-form');

    formTypeButtons.forEach(button => {
      button.addEventListener('click', function() {
        const formType = this.getAttribute('data-form');
        
        // Update active button
        formTypeButtons.forEach(btn => btn.classList.remove('active'));
        this.classList.add('active');
        
        // Show corresponding form
        contactForms.forEach(form => form.classList.remove('active'));
        document.getElementById(formType + '-form').classList.add('active');
      });
    });
  });
</script>

{% schema %}
{
  "name": "Contact Form",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Get in Touch"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Have a question? We'd love to hear from you."
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#f8f9fa"
    },
    {
      "type": "checkbox",
      "id": "show_form_selector",
      "label": "Show Form Type Selector",
      "default": true
    },
    {
      "type": "text",
      "id": "general_form_label",
      "label": "General Form Label",
      "default": "General Inquiry"
    },
    {
      "type": "text",
      "id": "support_form_label",
      "label": "Support Form Label",
      "default": "Support"
    },
    {
      "type": "text",
      "id": "sales_form_label",
      "label": "Sales Form Label",
      "default": "Sales"
    },
    {
      "type": "header",
      "content": "Form Labels"
    },
    {
      "type": "text",
      "id": "name_label",
      "label": "Name Field Label",
      "default": "Name"
    },
    {
      "type": "text",
      "id": "email_label",
      "label": "Email Field Label", 
      "default": "Email"
    },
    {
      "type": "text",
      "id": "phone_label",
      "label": "Phone Field Label",
      "default": "Phone"
    },
    {
      "type": "text",
      "id": "subject_label",
      "label": "Subject Field Label",
      "default": "Subject"
    },
    {
      "type": "text",
      "id": "message_label",
      "label": "Message Field Label",
      "default": "Message"
    },
    {
      "type": "text",
      "id": "submit_button_text",
      "label": "Submit Button Text",
      "default": "Send Message"
    },
    {
      "type": "header",
      "content": "Success Messages"
    },
    {
      "type": "text",
      "id": "success_title",
      "label": "Success Title",
      "default": "Thank you!"
    },
    {
      "type": "textarea",
      "id": "success_message",
      "label": "Success Message",
      "default": "Your message has been sent successfully. We'll get back to you soon."
    },
    {
      "type": "header",
      "content": "Privacy & Consent"
    },
    {
      "type": "checkbox",
      "id": "show_consent_checkbox",
      "label": "Show Consent Checkbox",
      "default": true
    },
    {
      "type": "textarea",
      "id": "consent_text",
      "label": "Consent Text",
      "default": "I agree to receive communications from Godspeed and understand I can unsubscribe at any time."
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Top padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 50
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Bottom padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 50
    }
  ],
  "presets": [
    {
      "name": "Contact Form",
      "category": "Contact"
    }
  ]
}
{% endschema %}